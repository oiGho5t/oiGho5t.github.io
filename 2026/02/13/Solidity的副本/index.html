<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>solidity学习日记 | 幼稚鬼的秘密基地</title><meta name="author" content="oiGhost"><meta name="copyright" content="oiGhost"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="下面是我在cryptozombies学习的过程:https:&#x2F;&#x2F;cryptozombies.io&#x2F; .&#x2F;zombiefactory.sol123456789101112131415161718192021222324252627282930313233343536373839pragma solidity &gt;&#x3D;0.5.0 &lt;0.6.0;contract ZombieFacto">
<meta property="og:type" content="article">
<meta property="og:title" content="solidity学习日记">
<meta property="og:url" content="https://oigho5t.github.io/2026/02/13/Solidity%E7%9A%84%E5%89%AF%E6%9C%AC/index.html">
<meta property="og:site_name" content="幼稚鬼的秘密基地">
<meta property="og:description" content="下面是我在cryptozombies学习的过程:https:&#x2F;&#x2F;cryptozombies.io&#x2F; .&#x2F;zombiefactory.sol123456789101112131415161718192021222324252627282930313233343536373839pragma solidity &gt;&#x3D;0.5.0 &lt;0.6.0;contract ZombieFacto">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://oigho5t.github.io/img/3.jpg">
<meta property="article:published_time" content="2026-02-13T11:31:08.000Z">
<meta property="article:modified_time" content="2026-02-13T11:32:59.545Z">
<meta property="article:author" content="oiGhost">
<meta property="article:tag" content="web3">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://oigho5t.github.io/img/3.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "solidity学习日记",
  "url": "https://oigho5t.github.io/2026/02/13/Solidity%E7%9A%84%E5%89%AF%E6%9C%AC/",
  "image": "https://oigho5t.github.io/img/3.jpg",
  "datePublished": "2026-02-13T11:31:08.000Z",
  "dateModified": "2026-02-13T11:32:59.545Z",
  "author": [
    {
      "@type": "Person",
      "name": "oiGhost",
      "url": "https://oigho5t.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/touxiang.jpg"><link rel="canonical" href="https://oigho5t.github.io/2026/02/13/Solidity%E7%9A%84%E5%89%AF%E6%9C%AC/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'solidity学习日记',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.1.1"></head><body><div class="bg-animation" id="web_bg" style="background-image: url(/img/2.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 目录</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我们</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/3.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/touxiang.jpg" alt="Logo"><span class="site-name">幼稚鬼的秘密基地</span></a><a class="nav-page-title" href="/"><span class="site-name">solidity学习日记</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 目录</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我们</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">solidity学习日记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2026-02-13T11:31:08.000Z" title="发表于 2026-02-13 19:31:08">2026-02-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-13T11:32:59.545Z" title="更新于 2026-02-13 19:32:59">2026-02-13</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>下面是我在cryptozombies学习的过程:<br><a target="_blank" rel="noopener" href="https://cryptozombies.io/">https://cryptozombies.io/</a></p>
<h5 id="zombiefactory-sol"><a href="#zombiefactory-sol" class="headerlink" title=".&#x2F;zombiefactory.sol"></a>.&#x2F;zombiefactory.sol</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity &gt;=0.5.0 &lt;0.6.0;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line">	event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">	uint dnaDigits = 16;</span><br><span class="line">	uint dnaModulus = 10 ** dnaDigits;</span><br><span class="line"></span><br><span class="line">	struct Zombie &#123;</span><br><span class="line">		string name;</span><br><span class="line">		uint dna;</span><br><span class="line">	&#125;</span><br><span class="line">	Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">	mapping (uint =&gt; address) public zombieToOwner;</span><br><span class="line">	mapping (address =&gt; uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">	function _createZombie(string memory _name, uint _dna) private &#123;</span><br><span class="line">		uint id = zombies.push(Zombie(_name, _dna)) - 1;</span><br><span class="line">		zombieToOwner[id] = msg.sender;</span><br><span class="line">		ownerZombieCount[msg.sender]++;</span><br><span class="line">		emit NewZombie(id, _name, _dna);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">	function _generateRandomDna(string memory _str) private view returns (uint) &#123;</span><br><span class="line">		uint rand = uint(keccak256(abi.encodePacked(_str)));</span><br><span class="line">		return rand % dnaModulus;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	function createRandomZombie(string memory _name) public &#123;</span><br><span class="line">		require(ownerZombieCount[msg.sender] == 0);</span><br><span class="line">		uint randDna = _generateRandomDna(_name);</span><br><span class="line">		_createZombie(_name, randDna);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract ZombieFeeding is ZombieFactory&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="zombiefeeding-sol"><a href="#zombiefeeding-sol" class="headerlink" title="zombiefeeding.sol"></a>zombiefeeding.sol</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity &gt;=0.5.0 &lt;0.6.0;</span><br><span class="line"></span><br><span class="line">import &quot;./zombiefactory.sol&quot;;</span><br><span class="line"></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">	function getKitty(uint256 _id) external view returns (</span><br><span class="line">		bool isGestating,</span><br><span class="line">		bool isReady,</span><br><span class="line">		uint256 cooldownIndex,</span><br><span class="line">		uint256 nextActionAt,</span><br><span class="line">		uint256 siringWithId,</span><br><span class="line">		uint256 birthTime,</span><br><span class="line">		uint256 matronId,</span><br><span class="line">		uint256 sireId,</span><br><span class="line">		uint256 generation,</span><br><span class="line">		uint256 genes</span><br><span class="line">	);</span><br><span class="line">&#125;</span><br><span class="line">contract ZombieFeeding is ZombieFactory &#123;</span><br><span class="line">	address ckAddress = 0x06012c8cf97BEaD5deAe237070F9587f8E7A266d;</span><br><span class="line">	KittyInterface kittyContract = KittyInterface(ckAddress);</span><br><span class="line"></span><br><span class="line">	function feedAndMultiply(uint _zombieId, uint _targetDna) public &#123;</span><br><span class="line">		require(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">		Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">		_targetDna = _targetDna % dnaModulus;</span><br><span class="line">		uint newDna = (myZombie.dna + _targetDna) / 2;</span><br><span class="line">		_createZombie(&quot;NoName&quot;, newDna);</span><br><span class="line">	&#125;</span><br><span class="line">	function feedOnKitty(uint _zombieId, uint _kittyId) public &#123;</span><br><span class="line">		uint kittyDna;</span><br><span class="line">		(,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);</span><br><span class="line">		feedAndMultiply(_zombieId, kittyDna);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><code>Solidity</code> 是一种用于编写以太坊虚拟机（<code>EVM</code>）智能合约的编程语言。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.21;</span><br><span class="line">contract HelloWeb3&#123;</span><br><span class="line">    string public _string = &quot;Hello Web3!&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第 3-4 行是合约部分。第 3 行创建合约（contract），并声明合约名为 <code>HelloWeb3</code>。第 4 行是合约内容，声明了一个 string（字符串）变量 <code>_string</code>，并赋值为 “Hello Web3!”。</p>
<h4 id="值类型："><a href="#值类型：" class="headerlink" title="值类型："></a>值类型：</h4><ol>
<li> <strong>值类型(Value Type)</strong> ：包括布尔型，整数型等等，这类变量赋值时候直接传递数值。</li>
<li> <strong>引用类型(Reference Type)</strong> ：包括数组和结构体，这类变量占空间大，赋值时候直接传递地址（类似指针）。</li>
<li> <strong>映射类型(Mapping Type)</strong> : Solidity中存储键值对的数据结构，可以理解为哈希表</li>
</ol>
<h4 id="1-布尔型："><a href="#1-布尔型：" class="headerlink" title="1. 布尔型："></a>1. 布尔型：</h4><p>布尔值的运算符包括：</p>
<ul>
<li><code>!</code> （逻辑非）</li>
<li><code>&amp;&amp;</code> （逻辑与，”and”）</li>
<li><code>||</code> （逻辑或，”or”）</li>
<li><code>==</code> （等于）</li>
<li><code>!=</code> （不等于）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 布尔运算</span><br><span class="line">bool public _bool1 = !_bool; // 取非</span><br><span class="line">bool public _bool2 = _bool &amp;&amp; _bool1; // 与</span><br><span class="line">bool public _bool3 = _bool || _bool1; // 或</span><br><span class="line">bool public _bool4 = _bool == _bool1; // 相等</span><br><span class="line">bool public _bool5 = _bool != _bool1; // 不相等</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<p>在上述代码中：变量 <code>_bool</code> 的取值是 <code>true</code>；<code>_bool1</code> 是 <code>_bool</code> 的非，为 <code>false</code>；<code>_bool &amp;&amp; _bool1</code> 为 <code>false</code>；<code>_bool || _bool1</code> 为 <code>true</code>；<code>_bool == _bool1</code> 为 <code>false</code>；<code>_bool != _bool1</code> 为 <code>true</code>。</p>
<p><strong>值得注意的是：</strong> <code>&amp;&amp;</code> 和 <code>||</code> 运算符遵循短路规则，这意味着，假如存在 <code>f(x) || g(y)</code> 的表达式，如果 <code>f(x)</code> 是 <code>true</code>，<code>g(y)</code> 不会被计算，即使它和 <code>f(x)</code> 的结果是相反的。假如存在<code>f(x) &amp;&amp; g(y)</code> 的表达式，如果 <code>f(x)</code> 是 <code>false</code>，<code>g(y)</code> 不会被计算。 所谓“短路规则”，一般出现在逻辑与（&amp;&amp;）和逻辑或（||）中。 当逻辑与（&amp;&amp;）的第一个条件为false时，就不会再去判断第二个条件； 当逻辑或（||）的第一个条件为true时，就不会再去判断第二个条件，这就是短路规则。</p>
<h4 id="2-地址类型"><a href="#2-地址类型" class="headerlink" title="2. 地址类型"></a>2. 地址类型</h4><p>地址类型(address)有两类：</p>
<ul>
<li>普通地址（address）: 存储一个 20 字节的值（以太坊地址的大小）。</li>
<li>payable address: 比普通地址多了 <code>transfer</code> 和 <code>send</code> 两个成员方法，用于接收转账。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 地址</span><br><span class="line">address public _address = 0x7A58c0Be72BE218B41C608b7Fe7C5bB630736C71;</span><br><span class="line">address payable public _address1 = payable(_address); // payable address，可以转账、查余额</span><br><span class="line">// 地址类型的成员</span><br><span class="line">uint256 public balance = _address1.balance; // balance of address</span><br></pre></td></tr></table></figure>

<h4 id="3枚举-enum"><a href="#3枚举-enum" class="headerlink" title="3枚举 enum"></a>3枚举 enum</h4><p>枚举（<code>enum</code>）是 Solidity 中用户定义的数据类型。它主要用于为 <code>uint</code> 分配名称，使程序易于阅读和维护。它与 <code>C 语言</code> 中的 <code>enum</code> 类似，使用名称来代替从 <code>0</code> 开始的 <code>uint</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 用enum将uint 0， 1， 2表示为Buy, Hold, Sell</span><br><span class="line">enum ActionSet &#123; Buy, Hold, Sell &#125;</span><br><span class="line">// 创建enum变量 action</span><br><span class="line">ActionSet action = ActionSet.Buy;</span><br></pre></td></tr></table></figure>

<p>枚举可以显式地和 <code>uint</code> 相互转换，并会检查转换的无符号整数是否在枚举的长度内，否则会报错：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// enum可以和uint显式的转换</span><br><span class="line">function enumToUint() external view returns(uint)&#123;</span><br><span class="line">    return uint(action);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>enum</code> 是一个比较冷门的数据类型，几乎没什么人用。</p>
<h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function &lt;function name&gt;([parameter types[, ...]]) &#123;internal|external|public|private&#125; [pure|view|payable] [virtual|override] [&lt;modifiers&gt;]</span><br><span class="line">[returns (&lt;return types&gt;)]&#123; &lt;function body&gt; &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>看着有一些复杂，让我们从前往后逐个解释(方括号中的是可写可不 写的关键字)：</p>
<ol>
<li> <code>function</code>：声明函数时的固定用法。要编写函数，就需要以 <code>function</code> 关键字开头。</li>
<li> <code>&lt;function name&gt;</code>：函数名。</li>
<li> <code>([parameter types[, ...]])</code>：圆括号内写入函数的参数，即输入到函数的变量类型和名称。</li>
<li> <code>{internal|external|public|private}</code>：函数可见性说明符，共有4种。<ul>
<li><code>public</code>：内部和外部均可见。</li>
<li><code>private</code>：只能从本合约内部访问，继承的合约也不能使用。</li>
<li><code>external</code>：只能从合约外部访问（但内部可以通过 <code>this.f()</code> 来调用，<code>f</code>是函数名）。</li>
<li><code>internal</code>: 只能从合约内部访问，继承的合约可以用。<br> <strong>注意 1</strong>：合约中定义的函数需要明确指定可见性，它们没有默认值。<br> <strong>注意 2</strong>：<code>public|private|internal</code> 也可用于修饰状态变量(定义可参考<a target="_blank" rel="noopener" href="https://www.wtf.academy/zh/course/solidity101/%5B../05_DataStorage/readme.md#1-%E7%8A%B6%E6%80%81%E5%8F%98%E9%87%8F%5D(https://github.com/AmazingAng/WTF-Solidity/tree/main/05_DataStorage#1-%E7%8A%B6%E6%80%81%E5%8F%98%E9%87%8F)">WTF Solidity 第5讲的相关内容</a>)。<code>public</code>变量会自动生成同名的<code>getter</code>函数，用于查询数值。未标明可见性类型的状态变量，默认为<code>internal</code>。</li>
</ul>
</li>
<li> <code>[pure|view|payable]</code>：决定函数权限&#x2F;功能的关键字。<code>payable</code>（可支付的）很好理解，带着它的函数，运行的时候可以给合约转入 ETH。<code>pure</code> 和 <code>view</code> 的介绍见下一节。</li>
<li> <code>[virtual|override]</code>: 方法是否可以被重写，或者是否是重写方法。<code>virtual</code>用在父合约上，标识的方法可以被子合约重写。<code>override</code>用在自合约上，表名方法重写了父合约的方法。</li>
<li> <code>&lt;modifiers&gt;</code>: 自定义的修饰器，可以有0个或多个修饰器。</li>
<li> <code>[returns ()]</code>：函数返回的变量类型和名称。</li>
<li> <code>&lt;function body&gt;</code>: 函数体。</li>
</ol>
<h4 id="到底什么是-Pure-和View？"><a href="#到底什么是-Pure-和View？" class="headerlink" title="到底什么是 Pure 和View？"></a>到底什么是 <code>Pure</code> 和<code>View</code>？</h4><p>刚开始学习 <code>solidity</code> 时，<code>pure</code> 和 <code>view</code> 关键字可能令人费解，因为其他编程语言中没有类似的关键字。<code>solidity</code> 引入这两个关键字主要是因为 以太坊交易需要支付气费（gas fee）。合约的状态变量存储在链上，gas fee 很贵，如果计算不改变链上状态，就可以不用付 <code>gas</code>。包含 <code>pure</code> 和 <code>view</code> 关键字的函数是不改写链上状态的，因此用户直接调用它们是不需要付 gas 的（注意，合约中非 <code>pure</code>&#x2F;<code>view</code> 函数调用 <code>pure</code>&#x2F;<code>view</code> 函数时需要付gas）。</p>
<p>在以太坊中，以下语句被视为修改链上状态：</p>
<ol>
<li>写入状态变量。</li>
<li>释放事件。</li>
<li>创建其他合约。</li>
<li>使用 <code>selfdestruct</code>.</li>
<li>通过调用发送以太币。</li>
<li>调用任何未标记 <code>view</code> 或 <code>pure</code> 的函数。</li>
<li>使用低级调用（low-level calls）。</li>
<li>使用包含某些操作码的内联汇编。</li>
</ol>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><h5 id="1-pure-和-view"><a href="#1-pure-和-view" class="headerlink" title="1. pure 和 view"></a>1. pure 和 view</h5><p>我们在合约里定义一个状态变量 <code>number</code>，初始化为 5。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.21;</span><br><span class="line">contract FunctionTypes&#123;</span><br><span class="line">    uint256 public number = 5;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义一个 <code>add()</code> 函数，每次调用会让 <code>number</code> 增加 1。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 默认function</span><br><span class="line">function add() external&#123;</span><br><span class="line">    number = number + 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果 <code>add()</code> 函数被标记为 <code>pure</code>，比如 <code>function add() external pure</code>，就会报错。因为 <code>pure</code> 是不配读取合约里的状态变量的，更不配改写。那 <code>pure</code> 函数能做些什么？举个例子，你可以给函数传递一个参数 <code>_number</code>，然后让他返回 <code>_number + 1</code>，这个操作不会读取或写入状态变量。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// pure: 纯纯牛马</span><br><span class="line">function addPure(uint256 _number) external pure returns(uint256 new_number)&#123;</span><br><span class="line">    new_number = _number + 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-internal-v-s-external"><a href="#2-internal-v-s-external" class="headerlink" title="2. internal v.s. external"></a>2. internal v.s. external</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// internal: 内部函数</span><br><span class="line">function minus() internal &#123;</span><br><span class="line">    number = number - 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 合约内的函数可以调用内部函数</span><br><span class="line">function minusCall() external &#123;</span><br><span class="line">    minus();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们定义一个 <code>internal</code> 的 <code>minus()</code> 函数，每次调用使得 <code>number</code> 变量减少 1。由于 <code>internal</code> 函数只能由合约内部调用，我们必须再定义一个 <code>external</code> 的 <code>minusCall()</code> 函数，通过它间接调用内部的 <code>minus()</code> 函数。</p>
<h5 id="3-payable"><a href="#3-payable" class="headerlink" title="3. payable"></a>3. payable</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// payable: 递钱，能给合约支付eth的函数</span><br><span class="line">function minusPayable() external payable returns(uint256 balance) &#123;</span><br><span class="line">    minus();    </span><br><span class="line">    balance = address(this).balance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们定义一个 <code>external payable</code> 的 <code>minusPayable()</code> 函数，间接的调用 <code>minus()</code>，并且返回合约里的 ETH 余额（<code>this</code> 关键字可以让我们引用合约地址）。我们可以在调用 <code>minusPayable()</code> 时往合约里转入1个 ETH。</p>
<h4 id="返回值：return-和-returns"><a href="#返回值：return-和-returns" class="headerlink" title="返回值：return 和 returns"></a>返回值：return 和 returns</h4><p>Solidity 中与函数输出相关的有两个关键字：<code>return</code>和<code>returns</code>。它们的区别在于：</p>
<ul>
<li><code>returns</code>：跟在函数名后面，用于声明返回的变量类型及变量名。</li>
<li><code>return</code>：用于函数主体中，返回指定的变量。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 返回多个变量</span><br><span class="line">function returnMultiple() public pure returns(uint256, bool, uint256[3] memory)&#123;</span><br><span class="line">    return(1, true, [uint256(1),2,5]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上述代码中，我们利用 <code>returns</code> 关键字声明了有多个返回值的 <code>returnMultiple()</code> 函数，然后我们在函数主体中使用 <code>return(1, true, [uint256(1),2,5])</code> 确定了返回值。</p>
<p>这里<code>uint256[3]</code>声明了一个长度为<code>3</code>且类型为<code>uint256</code>的数组作为返回值。因为<code>[1,2,3]</code>会默认为<code>uint8(3)</code>，因此<code>[uint256(1),2,5]</code>中首个元素必须强转<code>uint256</code>来声明该数组内的元素皆为此类型。数组类型返回值默认必须用memory修饰</p>
<h4 id="以太单位"><a href="#以太单位" class="headerlink" title="以太单位"></a>以太单位</h4><p><code>Solidity</code>中不存在小数点，以<code>0</code>代替为小数点，来确保交易的精确度，并且防止精度的损失，利用以太单位可以避免误算的问题，方便程序员在合约中处理货币交易。</p>
<ul>
<li><code>wei</code>: 1</li>
<li><code>gwei</code>: 1e9 &#x3D; 1000000000</li>
<li><code>ether</code>: 1e18 &#x3D; 1000000000000000000</li>
</ul>
<h4 id="时间单位"><a href="#时间单位" class="headerlink" title="时间单位"></a>时间单位</h4><p>可以在合约中规定一个操作必须在一周内完成，或者某个事件在一个月后发生。这样就能让合约的执行可以更加精确，不会因为技术上的误差而影响合约的结果。因此，时间单位在<code>Solidity</code>中是一个重要的概念，有助于提高合约的可读性和可维护性。</p>
<ul>
<li><code>seconds</code>: 1</li>
<li><code>minutes</code>: 60 seconds &#x3D; 60</li>
<li><code>hours</code>: 60 minutes &#x3D; 3600</li>
<li><code>days</code>: 24 hours &#x3D; 86400</li>
<li><code>weeks</code>: 7 days &#x3D; 604800</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://oigho5t.github.io">oiGhost</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://oigho5t.github.io/2026/02/13/Solidity%E7%9A%84%E5%89%AF%E6%9C%AC/">https://oigho5t.github.io/2026/02/13/Solidity%E7%9A%84%E5%89%AF%E6%9C%AC/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://oigho5t.github.io" target="_blank">幼稚鬼的秘密基地</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/web3/">web3</a></div><div class="post-share"><div class="social-share" data-image="/img/3.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2026/02/05/hello-world/" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Hello World</div></div><div class="info-2"><div class="info-item-1">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;  More info: Writing Run server1$ hexo server  More info: Server Generate static files1$ hexo generate  More info: Generating Deploy to remote sites1$ hexo deploy  More info: Deployment </div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">oiGhost</div><div class="author-info-description">天行健,君子以自强不息!</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-5"><a class="toc-link" href="#zombiefactory-sol"><span class="toc-number">1.</span> <span class="toc-text">.&#x2F;zombiefactory.sol</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#zombiefeeding-sol"><span class="toc-number">2.</span> <span class="toc-text">zombiefeeding.sol</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%80%BC%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="toc-number">3.</span> <span class="toc-text">值类型：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%B8%83%E5%B0%94%E5%9E%8B%EF%BC%9A"><span class="toc-number">4.</span> <span class="toc-text">1. 布尔型：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%9C%B0%E5%9D%80%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.</span> <span class="toc-text">2. 地址类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E6%9E%9A%E4%B8%BE-enum"><span class="toc-number">6.</span> <span class="toc-text">3枚举 enum</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">7.</span> <span class="toc-text">函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%B0%E5%BA%95%E4%BB%80%E4%B9%88%E6%98%AF-Pure-%E5%92%8CView%EF%BC%9F"><span class="toc-number">8.</span> <span class="toc-text">到底什么是 Pure 和View？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-number">9.</span> <span class="toc-text">代码</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-pure-%E5%92%8C-view"><span class="toc-number">9.1.</span> <span class="toc-text">1. pure 和 view</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-internal-v-s-external"><span class="toc-number">9.2.</span> <span class="toc-text">2. internal v.s. external</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-payable"><span class="toc-number">9.3.</span> <span class="toc-text">3. payable</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%80%BC%EF%BC%9Areturn-%E5%92%8C-returns"><span class="toc-number">10.</span> <span class="toc-text">返回值：return 和 returns</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E5%8D%95%E4%BD%8D"><span class="toc-number">11.</span> <span class="toc-text">以太单位</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%8D%95%E4%BD%8D"><span class="toc-number">12.</span> <span class="toc-text">时间单位</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2026/02/13/Solidity%E7%9A%84%E5%89%AF%E6%9C%AC/" title="solidity学习日记"><img src="/img/3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="solidity学习日记"/></a><div class="content"><a class="title" href="/2026/02/13/Solidity%E7%9A%84%E5%89%AF%E6%9C%AC/" title="solidity学习日记">solidity学习日记</a><time datetime="2026-02-13T11:31:08.000Z" title="发表于 2026-02-13 19:31:08">2026-02-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/05/hello-world/" title="Hello World">Hello World</a><time datetime="2026-02-05T08:24:07.913Z" title="发表于 2026-02-05 16:24:07">2026-02-05</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By oiGhost</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.4</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="ture"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>